@using System.Globalization
@{
	ViewData["Title"] = "Trip Sample - JourneyIndex";
}

@model BusJourneysResponseModel

<style>
	.journeyDiv {
	width: 350px;
	min-height: 150px;
	border: 0.5px solid #B4B4B4;
	border-radius: 3px;
	margin: 10px;
	padding: 5px;
	background: #fff;
	}
</style>

<div class="text-center">
	<div class="main-trip-area">
		<div class="header">
			<p></p>
			<br/>
			<p></p>
		</div>
		<div class="container">
			@if (Model.Data.Any())
			{
				foreach (var item in Model.Data)
				{
					<div class="journeyDiv">
						<div class="">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<div class="d-flex" style="font-size: 13px; font-weight: 800; color: #6c757d;">
										@{
											string parnetIcon = "https://s3.eu-central-1.amazonaws.com/static.obilet.com/images/partner/"+item.PartnerId+"-sm.png";
										}
										<img style="width:80px" src="@parnetIcon" />
									</div>
									<div class="d-flex" style="font-size: 11px; font-weight: 600; color: #6c757d;">
										<div class="me-4">KALKIŞ</div>
										<div style="margin-left: 35px;">VARIŞ</div>
									</div>

									<div class="d-flex align-items-center" style="font-size: 20px; font-weight: bold; margin-top: -2px;">
										<div class="me-3">@item.Journey.Departure.ToString("t")</div>
										<div style="font-size: 14px;">→</div>
										<div class="ms-3">@item.Journey.Arrival.ToString("t")</div>
									</div>

									<div style="font-size: 13px; color: #555; margin-top: 4px;">
										@item.Journey.Origin - @item.Journey.Destination
									</div>
								</div>

								<div>
									<span class="badge rounded text-white"
									style="background-color: #dc3545; font-size: 14px; padding: 10px 18px;">
										@item.Journey.InternetPrice.ToString("N2", new CultureInfo("tr-TR")) @item.Journey.Currency
									</span>
								</div>
							</div>

							<div class="seatCounterDiv">
								
								@if (@item.AvailableSeats <= 10)
								{
									<div id="totalSeats">@item.AvailableSeats koltuk kaldı !</div>
								}
								
								
							</div>


						</div>
					</div>
				}
			}

		</div>
	</div>
</div>

<div>
</div>

<script>

	$(document).ready(function() {
		window.addEventListener("pageshow", function (event) {
			if (event.persisted) {
				console.log("pageshow persisted fired");
				location.reload();
			}
		});

		const departure = FormatTurkishDate(FormatDate(getCookie("indexDepartureVal")));
		const origin = getCookie("indexOriginName");
		const target = getCookie("indexTargetName");

		$(".header p:eq(1)").text(departure);
		$(".header p:eq(0)").text(origin+' - '+target);
	});

	
</script>